buildscript {
    ext.xodusVersion = '1.2.2'
    ext.kotlinVersion = '1.2.30'
    ext.buildVersion = '1.1.0'

    repositories {
        mavenCentral()
        maven { url 'http://repository.jetbrains.com/xodus' }
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"
    }
}

plugins {
    id 'java'
    id 'idea'                                         // ide sync fine tuning
    id "com.jfrog.bintray" version "1.7"
    id 'com.github.johnrengelman.shadow' version '2.0.2'
}

apply from: 'libraries.gradle'
apply plugin: 'kotlin'

ext.globalArtifactsBuildDir = buildDir
group = 'org.jetbrains.xodus'

allprojects {
    apply plugin: 'java'
    apply plugin: 'idea'
    apply plugin: 'maven'
    apply plugin: 'maven-publish'
    sourceCompatibility = 1.8
    version = buildVersion

    repositories {
        mavenCentral()
        maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
        maven { url 'http://repository.jetbrains.com/xodus' }
    }

    idea {
        module {
            downloadSources = true
        }
    }
}

defaultTasks 'clean build'

repositories {
    mavenCentral()
}