webpackJsonp([1],[function(e,n,t){(function(e){e.$=e.jQuery=t(33),t(10),t(5),t(6),t(4),t(11),t(8),t(57),angular.module("xodus",["ngRoute","ui.bootstrap","ui.bootstrap.tpls","ui.select"]),angular.module("xodus").constant("templateUrl",function(e){return t(53).join("templates/",e)}).config(["$routeProvider","templateUrl",function(e,n){e.when("/type/:typeId",{template:t(3),reloadOnSearch:!1}).when("/type/:typeId/entity/:entityId",{template:t(2)}).when("/type/:typeId/new",{template:t(2)}).when("/error",{template:t(29)}).when("/empty-store",{template:t(28)}).when("/setup",{template:t(31)}).otherwise({redirectTo:"/type/0",template:t(3)})}]),angular.module("xodus").config(["$httpProvider",function(e){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache"}]),t(4),t(49),t(50),t(51),t(52),t(48),t(34),t(35),t(41),t(38),t(36),t(37),t(39),t(40),t(42),t(43),t(46),t(44),t(45),t(47)}).call(n,function(){return this}())},function(e,n){e.exports='<div>\n    <div class="modal-header without-bottom-border">\n        <h3 class=modal-title>{{item.label}}?</h3>\n    </div>\n    <div class=modal-body>\n        <span class=co-text>{{item.message}}</span>\n        <uib-alert type=danger data-ng-show=error close=closeError()>\n            {{error}}\n        </uib-alert>\n    </div>\n    <div class="modal-footer without-top-border">\n        <button class="btn btn-primary mdm-ui-component-confirm-button" data-ng-click=doAction()>\n            {{item.action}}\n        </button>\n        <button class="btn btn-default mdm-ui-component-confirm-button" data-ng-click=cancel()>\n            Cancel\n        </button>\n    </div>\n</div>'},function(e,n){e.exports='<div class=container>\n    <div class=row>\n        <div ng-controller="EntityController as entityCtrl">\n            <form-view data-entity-id=entityId data-entity-type-id=typeId>\n            </form-view>\n        </div>\n    </div>\n</div>'},function(e,n){e.exports='<div data-ng-controller="SearchController as search" id=page-wrapper>\n\n    <div>\n        <div class=row>\n            <form class="form form-horizontal" data-ng-submit=search.onSearch()>\n                <div class="form-group col-md-3">\n                    <ui-select class=pull-right data-ng-model=selectedType data-theme=bootstrap data-ng-change=search.onTypeSelect(selectedType) style="width:200px;    margin-right: 15px">\n                        <ui-select-match placeholder="Select type">\n                            {{$select.selected.name}}\n                        </ui-select-match>\n                        <ui-select-choices repeat="type in types | filter: $select.search track by type.id">\n                            <small data-ng-bind=type.name></small>\n                        </ui-select-choices>\n                    </ui-select>\n                </div>\n                <div class="form-group col-md-7">\n                    <div class=input-group>\n                        <input id=searchQuery autofocus data-ng-model=searchQuery class=form-control placeholder="try \'12\' or \'name=John\' or \'name~Sam and age=[35,40]\'">\n\n                        <div class=input-group-btn>\n                            <button class="btn btn-default" type=submit><i class="fa fa-fw fa-search"></i>\n                            </button>\n                            <button class="btn btn-default" data-ng-click=openInfo()>\n                                <i class="fa fa-fw fa-question"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div class="col-md-2 btn-group">\n                    <a class="btn btn-primary pull-left" data-ng-click=search.newEntity()>New</a>\n                    <a class="btn btn-danger pull-left" data-ng-click=search.deleteSearchResult()>Delete results</a>\n                </div>\n\n            </form>\n        </div>\n    </div>\n\n    <entity-type-view data-selected-type=selectedType></entity-type-view>\n</div>'},function(e,n,t){var a=t(25);"string"==typeof a&&(a=[[e.id,a,""]]);t(55)(a,{})},,,,,,,,,,,,,,,,,,,,,function(e,n,t){n=e.exports=t(24)(),n.push([e.id,"/*!\n * Start Bootstrap - SB Admin Bootstrap Admin Template (http://startbootstrap.com)\n * Code licensed under the Apache License v2.0.\n * For details, see http://www.apache.org/licenses/LICENSE-2.0.\n */body{margin-top:100px}@media (min-width:768px){body{margin-top:50px}}#wrapper{padding-left:0}#page-wrapper{width:100%;padding:0;background-color:#fff}.huge{line-height:normal}@media (min-width:768px){#wrapper{padding-left:225px}#page-wrapper{padding:10px}}.top-nav{padding:0 15px}.top-nav>li{display:inline-block;float:left}.top-nav>li>a{padding-top:15px;padding-bottom:15px;line-height:20px;color:#999}.top-nav>li>a:hover,.top-nav>li>a:focus,.top-nav>.open>a,.top-nav>.open>a:hover,.top-nav>.open>a:focus{color:#fff;background-color:#000}.top-nav>.open>.dropdown-menu{float:left;position:absolute;margin-top:0;border:1px solid rgba(0,0,0,.15);border-top-left-radius:0;border-top-right-radius:0;background-color:#fff;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px rgba(0,0,0,.175)}.top-nav>.open>.dropdown-menu>li>a{white-space:normal}ul.message-dropdown{padding:0;max-height:250px;overflow-x:hidden;overflow-y:auto}li.message-preview{width:275px;border-bottom:1px solid rgba(0,0,0,.15)}li.message-preview>a{padding-top:15px;padding-bottom:15px}li.message-footer{margin:5px 0}ul.alert-dropdown{width:200px}@media (min-width:768px){.side-nav{position:fixed;top:51px;left:225px;width:225px;margin-left:-225px;border:none;border-radius:0;overflow-y:auto;background-color:#222;bottom:0;overflow-x:hidden;padding-bottom:40px}.side-nav>li>a{width:225px;color:#fff}.side-nav>li.active>a{background-color:#000!important}.side-nav li a:hover,.side-nav li a:focus{outline:none;background-color:#000!important}}.side-nav>li>ul{padding:0}.side-nav>li>ul>li>a{display:block;padding:10px 15px 10px 38px;text-decoration:none;color:#999}.side-nav>li>ul>li>a:hover{color:#fff}.huge{font-size:40px}.panel-green{border-color:#5cb85c}.panel-green>.panel-heading{border-color:#5cb85c;color:#fff;background-color:#5cb85c}.panel-green>a{color:#5cb85c}.panel-green>a:hover{color:#3d8b3d}.panel-red{border-color:#d9534f}.panel-red>.panel-heading{border-color:#d9534f;color:#fff;background-color:#d9534f}.panel-red>a{color:#d9534f}.panel-red>a:hover{color:#b52b27}.panel-yellow{border-color:#f0ad4e}.panel-yellow>.panel-heading{border-color:#f0ad4e;color:#fff;background-color:#f0ad4e}.panel-yellow>a{color:#f0ad4e}.panel-yellow>a:hover{color:#df8a13}.edit-button{width:35px}.nav-search{padding:5px;margin-bottom:0}.action-button{width:100px}.entity-actions{padding:15px 0}.form-view-link-row{margin-top:15px}.search-info-section{margin-bottom:30px}.add-link-section{border-bottom:1px solid #ddd}.no-link-text{margin-top:10px}.preview-entity-properties{table-layout:fixed;overflow:hidden}.search-extended-header{font-weight:700}.search-extended-header,.panel-heading{background-color:#faf2cc!important}.pagination{margin:0}.top-nav>.open>.dropdown-menu>li>div{white-space:nowrap!important}a{cursor:pointer}.selected-item{background-color:#faf2cc}.for-delete{text-decoration:line-through}.database-action{padding-left:10px}.database-action-item:hover{color:#fff;background-color:#000}.with-pointer,.database-action span{cursor:pointer}",""])},function(e,n){e.exports='<div>\n    <div class="modal-header without-bottom-border">\n        <h3 class=modal-title>Change database location</h3>\n    </div>\n    <div class=modal-body>\n        <div class=container-fluid>\n            <store-setup show-buttons=false on-success=onSuccess></store-setup>\n        </div>\n    </div>\n    <div class="modal-footer without-top-border">\n        <button class="btn btn-primary mdm-ui-component-confirm-button" data-ng-click=changeDB()>\n            Change database\n        </button>\n        <button class="btn btn-default mdm-ui-component-confirm-button" data-ng-click=cancel()>\n            Cancel\n        </button>\n    </div>\n</div>'},function(e,n){e.exports='<div>\n    <div data-ng-if="selectedType() != null">\n        <div class=container data-ng-controller="DataViewController as dataView">\n            <div class=row>\n\n                <div data-ng-show=!dataView.isSearchExecuted>\n                    <h3 class=text-center>Press search button to find something.</h3>\n                </div>\n                <div data-ng-show=dataView.isSearchExecuted>\n                    <h3 class=text-center data-ng-show=!dataView.pager.hasResults()>Nothing founded.</h3>\n\n                    <div data-ng-show=dataView.pager.hasResults()>\n                        <div class=row>\n                            <div class=col-md-6>\n                                <div data-ng-show=dataView.pager.hasPagination()>\n                                    <uib-pagination data-total-items=dataView.pager.totalCount data-ng-model=dataView.pager.currentPage data-ng-change=dataView.pager.pageChanged() data-items-per-page={{dataView.pageSize}} max-size=5>\n                                    </uib-pagination>\n                                </div>\n                            </div>\n                            <div class=col-md-6>\n                                <h3 class=pull-right style="margin-top: 5px;margin-bottom: 15px">\n                                    Total records: {{dataView.pager.totalCount}}\n                                </h3>\n                            </div>\n                        </div>\n                        <div class=row>\n\n                            <div class="panel panel-default" data-ng-repeat="item in dataView.pager.items">\n                                <div class="panel-heading clearfix">\n                                    <h4 class="panel-title pull-left" style="padding-top: 5.5px">\n                                        {{item.label}}</h4>\n\n                                    <div class="btn-group pull-right">\n                                        <button class="btn btn-primary fa fa-pencil edit-button" data-ng-click=dataView.edit(item)></button>\n                                        <button class="btn btn-danger fa fa-trash edit-button" data-ng-click=dataView.deleteItem(item)></button>\n                                    </div>\n                                </div>\n                                <div class=panel-body>\n                                    <div>\n                                        <div data-ng-hide=item.properties.length>\n                                            No properties\n                                        </div>\n                                        <div data-ng-show=item.properties.length>\n                                            <table class="table table-striped table-condensed preview-entity-properties">\n                                                <thead>\n                                                <tr style="font-weight: bold">\n                                                    <td>Name\n                                                    <td>Type\n                                                    <td>Value\n                                                \n                                                \n                                                <tbody>\n                                                <tr data-ng-repeat="p in item.properties">\n                                                    <td>{{p.name}}\n                                                    <td>{{p.type.displayName}}\n                                                    <td>{{p.value}}\n                                                \n                                                \n                                            </table>\n                                        </div>\n                                    </div>\n                                    <div data-ng-hide=dataView.pager.isExpanded(item)>\n                                        <a href data-ng-click=dataView.pager.expand(item)><i class="fa fa-expand"></i>\n                                            expand</a>\n                                    </div>\n\n                                </div>\n                                <ul data-ng-show=dataView.pager.isExpanded(item) class=list-group>\n                                    <li class="list-group-item search-extended-header">Links\n                                    </li>\n                                    <li class=list-group-item>\n                                        <div data-ng-hide=item.links.length>\n                                            No links\n                                        </div>\n                                        <div data-ng-show=item.links.length>\n                                            <table class="table table-striped table-condensed preview-entity-properties">\n                                                <thead>\n                                                <tr style="font-weight: bold">\n                                                    <td>Name\n                                                    <td>Link\n                                                \n                                                \n                                                <tbody>\n                                                <tr data-ng-repeat="p in item.links">\n                                                    <td>{{p.name}}\n                                                    <td><entity-link title={{p.label}} typeid={{p.typeId}} entityid={{p.entityId}}>\n                                                    </entity-link>\n                                                \n                                                \n                                            </table>\n                                        </div>\n\n                                    </li>\n                                    <li class="list-group-item search-extended-header">Blobs</li>\n                                    <li class=list-group-item>\n                                        <div data-ng-hide=item.blobs.length>\n                                            No blobs\n                                        </div>\n                                        <div data-ng-show=item.blobs.length>\n                                            <table class="table table-striped table-condensed preview-entity-properties">\n                                                <thead>\n                                                <tr style="font-weight: bold">\n                                                    <td>Name\n                                                    <td>Download\n                                                \n                                                \n                                                <tbody>\n                                                <tr data-ng-repeat="p in item.blobs">\n                                                    <td>{{p.name}}\n                                                    <td>\n                                                        <a class="btn btn-default" target=_self data-ng-href="{{dataView.blobLink(item, p)}}">\n                                                            <i class="fa fa-download"></i>\n                                                        </a>\n                                                    \n                                                \n                                                \n                                            </table>\n                                        </div>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n\n                        <div data-ng-show=dataView.pager.hasPagination()>\n                            <uib-pagination data-total-items=dataView.pager.totalCount data-ng-model=dataView.pager.currentPage data-ng-change=dataView.pager.pageChanged() data-items-per-page={{dataView.pageSize}} data-max-size=5>\n                            </uib-pagination>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <script type=text/ng-template id=search-info.html>\n            <div class="modal-header">\n                <h3>Searching tutorial</h3>\n            </div>\n\n            <div class="modal-body">\n                <section class="search-info-section">\n                    <h4>Search by entity id</h4>\n                    <span>Passing any integer value to search input produces search by id</span>\n                </section>\n                <section class="search-info-section">\n                    <h4>Search by properties</h4>\n                    <code>firstName=John and secondName=McClane</code>\n\n                    <p>Produces search for all entities with property firstName equals to John and\n                        property secondName equals to McClane\n                    </p>\n\n                    <p>Non alphanumeric characters keys and values should be wrapped with single\n                        braces:\n                    </p>\n\n                    <code>\'first!Name\'=John and secondName=\'Mc\'\'Clane\'</code>\n\n                    <p><strong>Note</strong>: escape symbol for single brace is double single brace\n                    </p>\n                </section>\n\n                <section class="search-info-section">\n                    <h4>\'Starts with\' search</h4>\n                    <code>firstName~J and secondName=McClane</code>\n\n                    <p>Produces search for all entities with property firstName starts with J symbol\n                        and\n                        secondName equals to McClane\n                    </p>\n\n                </section>\n\n                <section class="search-info-section">\n                    <h4>Range search</h4>\n                    <code>firstName=John and age=[25,50]</code>\n\n                    <p>Produces search for all entities where property firstName equals to John and\n                        property age placed in range from 35 up to 50\n                    </p>\n\n                    <p><strong>Note</strong>: range search worked only with integer values.\n                        <code>age=[a,b]</code>\n                        produces search for entities with property age equals to \'[a,b]\'\n                    </p>\n\n                </section>\n\n            </div>\n\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" ng-click="closeInfo()"\n                        data-dismiss="modal">Close\n                </button>\n            </div>\n        </script>\n    </div>\n</div>'},function(e,n){e.exports="<div class=row>\n    <h2 class=text-center>There is no entity types in Xodus store. Try <a href=#setup>setup</a> another one</h2>\n</div>"},function(e,n){e.exports="<div class=row>\n    <h2 class=text-center>Uuups... Something went wrong. </h2>\n</div>"},function(e,n){e.exports='<div>\n    <div class=row data-ng-controller="FormViewController as formView">\n        <div class=row>\n            <h2 class=pull-left>{{formView.label}}</h2>\n        </div>\n        <div class="row entity-actions">\n            <button class="btn btn-primary pull-left" data-ng-click=cancel()>Back to search</button>\n\n            <div class=pull-right data-ng-show=editMode>\n                <button class="btn btn-primary action-button" data-ng-click=formView.save()>Save</button>\n                <button class="btn btn-danger action-button" data-ng-click=formView.revert()>Revert</button>\n            </div>\n            <div class=pull-right data-ng-hide=editMode>\n                <button class="btn btn-primary action-button" data-ng-click=toggleView()>Edit</button>\n            </div>\n        </div>\n        <div ng-if=state>\n\n            <div class=row>\n                <uib-alert type=danger data-ng-show=formView.error close=formView.closeError()>\n                    {{formView.error}}\n                </uib-alert>\n                <div class="panel panel-default" data-ng-controller="PropertiesController as props">\n                    <div class="panel-heading clearfix">\n                        <h4 class="panel-title pull-left">Properties</h4>\n\n                        <div class="btn-group pull-right">\n                            <button data-ng-show=editMode class="btn btn-primary pull-right" data-ng-click=props.newProperty()><i class="fa fa-plus"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class=panel-body>\n                        <div ng-show="properties.length === 0">\n                            No properties\n                        </div>\n\n                        <form class=form-horizontal name=propsForm novalidate>\n                            <div class=row style="font-weight: bold" data-ng-show=properties.length>\n                                <div class=col-md-3>\n                                    Name\n                                </div>\n                                <div class=col-md-2>\n                                    Type\n                                </div>\n                                <div class=col-md-7>\n                                    Value\n                                </div>\n                            </div>\n                            <div class=row data-ng-repeat="property in properties">\n                                <div class=col-md-3>\n                                    <div data-ng-class="{\'has-error\':  hasError(\'propsForm\', $index + \'name\' )}">\n                                        <input name="{{$index + \'name\'}}" data-ng-type=text class=form-control data-ng-required=true data-ng-model=property.name data-ng-disabled=!editMode data-ng-change=props.checkDuplicates(property) placeholder="Enter name" data-uib-tooltip="{{getMessage(\'propsForm\', $index + \'name\')}}" data-uib-tooltip-trigger=mouseenter>\n                                    </div>\n                                </div>\n                                <div class=col-md-2>\n                                    <ui-select data-ng-model=property.type data-theme=bootstrap data-ng-disabled=!editMode data-ng-change=props.removeValue(property)>\n                                        <ui-select-match placeholder="Select type">\n                                            {{$select.selected.displayName}}\n                                        </ui-select-match>\n                                        <ui-select-choices repeat="type in props.allTypes">\n                                            <small data-ng-bind=type.displayName></small>\n                                        </ui-select-choices>\n                                    </ui-select>\n                                </div>\n                                <div class=col-md-7>\n                                    <div class="form-group col-md-10" data-ng-class="{\'has-error\':  hasError(\'propsForm\', $index + \'value\' )}">\n                                        <div>\n                                            <input name="{{$index + \'value\'}}" class=form-control data-ng-pattern={{property.type.validation.pattern}} data-ng-model=property.value data-ng-required=true placeholder="Enter value" data-ng-change=props.validateType(property) data-ng-disabled="!editMode || property.type.readonly" data-uib-tooltip="{{getMessage(\'propsForm\', $index + \'value\')}}" data-uib-tooltip-trigger=mouseenter>\n                                        </div>\n                                    </div>\n                                    <div class=col-md-2 data-ng-show=editMode>\n                                        <div data-ng-show="$index + 1 !== properties.length">\n                                            <a class="btn btn-danger" data-ng-click=props.removeProperty(property)>\n                                                <i class="fa fa-minus"></i>\n                                            </a>\n                                        </div>\n                                        <div class=btn-group data-ng-show="$index + 1 === properties.length">\n                                            <a class="btn btn-danger" data-ng-click=props.removeProperty(property)>\n                                                <i class="fa fa-minus"></i>\n                                            </a>\n                                            <a class="btn btn-primary" data-ng-click=props.newProperty()>\n                                                <i class="fa fa-plus"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            <div class=row>\n                <div class="panel panel-default" data-ng-controller="LinksController as links">\n                    <div class="panel-heading clearfix">\n                        <h4 class="panel-title pull-left">Links</h4>\n                    </div>\n                    <div class=panel-body>\n\n                        <div class=row style="font-weight: bold" ng-show="editMode || uiLinks.length">\n                            <div class=col-md-3>\n                                Name\n                            </div>\n                            <div class=col-md-2>\n                                Type\n                            </div>\n                            <div class=col-md-7>\n                                Value\n                            </div>\n                        </div>\n                        <div class="row add-link-section" ng-show=editMode>\n                            <form class=form-horizontal name=linksForm novalidate>\n                                <div class=col-md-3>\n                                    <div data-ng-class="{\'has-error\':  hasError(\'linksForm\', \'name\' )}">\n                                        <input name=name data-ng-type=text class=form-control placeholder="Enter name" data-ng-required=true data-ng-model=links.newLink.name data-uib-tooltip="{{getMessage(\'linksForm\', \'name\')}}" data-uib-tooltip-trigger=mouseenter>\n                                    </div>\n                                </div>\n                                <div class=col-md-2>\n                                    <ui-select data-ng-model=links.newLink.type data-theme=bootstrap data-ng-change=links.updateEntities()>\n                                        <ui-select-match placeholder="Select type">\n                                            {{$select.selected.name}}\n                                        </ui-select-match>\n                                        <ui-select-choices repeat="type in links.allEntityTypes">\n                                            <small data-ng-bind=type.name></small>\n                                        </ui-select-choices>\n                                    </ui-select>\n                                </div>\n                                <div class=col-md-7>\n                                    <div class="form-group col-md-10" data-ng-class="{\'has-error\':  hasError(\'linksForm\', \'value\' )}">\n                                        <div>\n                                            <ui-select data-ng-model=links.newLink.value data-theme=bootstrap data-ng-required=true name=value>\n                                                <ui-select-match placeholder="Search entity">\n                                                    {{$select.selected.label}}\n                                                </ui-select-match>\n                                                <ui-select-choices repeat="entity in links.entities" refresh=links.searchEntities($select.search) refresh-delay=500>\n                                                    <small data-ng-bind=entity.label></small>\n                                                </ui-select-choices>\n                                            </ui-select>\n                                        </div>\n                                    </div>\n                                    <div class=col-md-2 data-ng-show=editMode>\n                                        <a class="btn btn-primary" data-ng-click=links.addNewLink()>\n                                            Add link\n                                        </a>\n                                    </div>\n                                </div>\n                            </form>\n                            <hr>\n                        </div>\n                        <div data-ng-show="uiLinks.length === 0">\n                            <div data-ng-class="{\'no-link-text\' : editMode}">\n                                No links\n                            </div>\n                        </div>\n                        <div class="row form-view-link-row" data-ng-repeat="link in uiLinks">\n                            <div class=col-md-3>\n                                {{link.name}}\n                            </div>\n                            <div class=col-md-2>\n                                {{link.type}}\n                            </div>\n                            <div class=col-md-7>\n                                <div class=col-md-10 style="padding: 0; margin-right: -30px">\n                                    <entity-link title={{link.label}} typeid={{link.typeId}} entityid={{link.entityId}}>\n                                    </entity-link>\n\n                                </div>\n                                <div class=col-md-2 data-ng-show=editMode>\n                                    <a class="btn btn-danger" data-ng-click=links.removeLink(link)>\n                                        <i class="fa fa-minus"></i>\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=row>\n                <div class="panel panel-default" data-ng-controller="BlobsController as blobs">\n                    <div class="panel-heading clearfix">\n                        <h4 class="panel-title pull-left">Blobs</h4>\n                    </div>\n                    <div class=panel-body>\n                        <div data-ng-show="uiBlobs.length === 0">\n                            No blobs\n                        </div>\n                        <div class=row style="font-weight: bold" data-ng-show=uiBlobs.length>\n                            <div class=col-md-3>\n                                Name\n                            </div>\n                            <div class=col-md-2>\n                                Size\n                            </div>\n                            <div class=col-md-7>\n                                Action\n                            </div>\n                        </div>\n                        <div class="row form-view-link-row" data-ng-repeat="blob in uiBlobs">\n                            <div class=col-md-3>\n                                {{blob.name}}\n                            </div>\n                            <div class=col-md-2>\n                                {{blob.blobSize}}\n                            </div>\n                            <div class=col-md-7>\n                                <a class="btn btn-default" target=_self data-ng-href={{downloadLink(blob)}}>\n                                    <i class="fa fa-download"></i>\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>';
},function(e,n){e.exports="<div class=row>\n    <h2 class=text-center>Setup entity store.</h2>\n\n    <div class=container>\n        <store-setup data-show-buttons=true></store-setup>\n    </div>\n</div>"},function(e,n){e.exports='<div>\n    <uib-alert type=danger data-ng-show=error close=closeError()>\n        {{error}}\n    </uib-alert>\n    <form class=form-horizontal novalidate ng-submit=changeDB() name=database>\n        <div class=form-group data-ng-class="{\'has-error\':  (database.location.$invalid && database.location.$dirty)}">\n            <label for=location>location</label>\n            <input id=location name=location data-ng-required=true ng-model=db.location class=form-control placeholder=location data-uib-tooltip="{{getMessage(\'location\')}}" data-uib-tooltip-trigger=mouseenter>\n        </div>\n        <div class=form-group data-ng-class="{\'has-error\':  (database.key.$invalid && database.key.$dirty)}">\n            <label for=key>key</label>\n            <div class=input-group>\n                <input id=key name=key data-ng-required=true ng-model=db.key class=form-control placeholder=key data-uib-tooltip="{{getMessage(\'key\')}}" data-uib-tooltip-trigger=mouseenter>\n                <div class=input-group-btn>\n                    <div class=btn-group uib-dropdown>\n                        <button id=single-button type=button class="btn btn-primary" uib-dropdown-toggle>\n                            Predefined keys <span class=caret></span>\n                        </button>\n                        <ul class=dropdown-menu uib-dropdown-menu role=menu aria-labelledby=single-button>\n                            <li role=menuitem data-ng-repeat="key in predefinedKeys">\n                                <a data-ng-click=applyKey(key)>{{key.name}}</a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=form-group ng-if=showButtons>\n            <button type=submit class="btn btn-primary">\n                Change database\n            </button>\n        </div>\n    </form>\n</div>'},,function(e,n){angular.module("xodus").controller("ConfirmationController",["$scope","$uibModalInstance","$q","item",function(e,n,t,a){e.item=a,e.error=null,e.doAction=function(){angular.isFunction(a.customAction)?t.when(a.customAction()).then(function(){n.close(!0)},function(){e.error="Error occurred while communication with server. Check server logs."}):n.close(!0)},e.cancel=function(){n.dismiss("cancel")},e.closeError=function(){e.error=null}}])},function(e,n,t){angular.module("xodus").controller("DataViewController",["EntityTypeService","EntitiesService","NavigationService","$scope","$uibModal","$routeParams",function(e,n,a,i,o,r){function l(n){return{totalCount:0,items:[],currentPage:1,expanded:{},pageChanged:function(){var t=this.currentPage,a=(t-1)*s.pageSize,o=this;o.currentPage=t,e.search(i.selectedType().id,n,a).then(function(e){o.items=e.items,o.totalCount=e.totalCount,s.isSearchExecuted=!0})},hasPagination:function(){return this.totalCount>s.pageSize},hasResults:function(){return this.items.length>0},expand:function(e){this.expanded[e.id]=!0},isExpanded:function(e){return angular.isDefined(this.expanded[e.id])}}}function d(){return r.q?r.q:null}var s=this;s.searchQuery=d(),s.pageSize=50,i.type=i.selectedType(),i.$on("$routeUpdate",function(){s.searchQuery=d(),s.pager=l(s.searchQuery),s.pager.pageChanged(1)}),s.pager=l(s.searchQuery),s.newInstance=n.newEntity(i.type.id,i.type.name),s.pager.pageChanged(1),s.edit=function(e){a.toEntity(e.typeId,e.id)},s.deleteItem=function(e){o.open({animation:!0,template:t(1),controller:"ConfirmationController",resolve:{item:function(){return{label:"Deleting "+e.label,message:"Are you sure you want to delete "+e.label+"?",action:"Delete",customAction:function(){return n.deleteEntity(e.typeId,e.id)}}}}}).result.then(function(e){e&&s.onSearch()})},s.refresh=function(){s.pager.pageChanged()},s.blobLink=function(e,n){return a.api.blobLink(e,n.name)}}])},function(e,n){angular.module("xodus").controller("BlobsController",["$scope","NavigationService",function(e,n){e.uiBlobs=e.state.current.blobs,e.downloadLink=function(t){return n.api.blobLink(e.state.current,t.name)}}])},function(e,n){angular.module("xodus").controller("EntityController",["$scope","$routeParams",function(e,n){e.typeId=n.typeId,e.entityId=n.entityId,angular.isDefined(e.entityId)||(e.entityId=null)}])},function(e,n){angular.module("xodus").controller("FormViewController",["$scope","EntitiesService","EntityTypeService","$timeout",function(e,n,t,a){function i(){e.state=null,e.entityId?n.byId(e.entityTypeId,e.entityId).then(function(n){e.state=o(n),d.error=null,l()}):t.byId(e.entityTypeId).then(function(n){e.state=o({typeId:e.entityTypeId,type:n.name,links:[],properties:[],blobs:[]}),l()})}function o(e){return{initial:angular.copy(e),current:angular.copy(e),revert:function(){this.current=angular.copy(this.initial),r()},update:function(e){this.initial=angular.copy(e),this.current=angular.copy(e),r()}}}function r(){var n=e.state;e.state=null,a(function(){e.state=n,l()},0)}function l(){var n=e.state.initial;d.isNew=!angular.isDefined(n.id),d.label=d.isNew?"New "+n.type:n.label}var d=this;e.findByName=function(e,n){var t=null;return angular.forEach(e,function(e){n===e.name&&(t=e)}),t},i(),d.save=function(){var t=e.state,a=e.getForm("propsForm");if(e.makeDirty(a),!a.$invalid){e.toggleView();var i=n.getChangeSummary(t.initial,t.current);n.save(t.initial,i).then(function(e){t.update(e.data)},function(n){d.error=n.data.msg,e.toggleView()})}},d.closeError=function(){d.error=null},d.revert=function(){e.state.revert(),d.isNew||e.toggleView()}}])},function(e,n){angular.module("xodus").controller("LinksController",["$scope","EntitiesService","EntityTypeService",function(e,n,t){function a(){return{name:null,type:r.allEntityTypes[0],value:null}}function i(e){return{name:e.name,typeId:e.type.id,type:e.type.name,entityId:e.value.id,label:e.value.label}}function o(n){var t=null;return angular.forEach(e.uiLinks,function(e){e.name==n&&(t=e)}),t}var r=this;e.uiLinks=e.state.current.links,r.allEntityTypes=[],r.entities=[],t.all().then(function(e){r.allEntityTypes=e,r.newLink=a()}),r.searchEntities=function(e){t.search(r.newLink.type.id,e,0,10).then(function(e){r.entities=e.items})},r.updateEntities=function(){r.newLink.value=null,r.searchEntities(null)},r.removeLink=function(n){var t=e.findByName(e.uiLinks,n.name);if(t){var a=e.uiLinks.indexOf(t);e.uiLinks.splice(a,1)}},r.addNewLink=function(){var n=e.linksForm;if(e.makeDirty(n),n.$valid){var t=o(r.newLink.name);if(t)return void n.name.$setValidity("duplicated",!1);e.state.current.links.push(i(r.newLink)),r.newLink=a(),r.updateEntities(),n.$setPristine(!0)}}}])},function(e,n){angular.module("xodus").controller("PropertiesController",["$scope","EntitiesService",function(e,n){var t=this;e.properties=e.state.current.properties,angular.forEach(e.properties,n.appendValidation),t.allTypes=n.allTypes(),t.newProperty=function(){e.properties.push(n.newProperty())},t.removeProperty=function(n){var t=e.properties.indexOf(n);e.properties.splice(t,1)},t.removeValue=function(e){e.value=null},t.checkDuplicates=function(n){var t=e.properties.indexOf(n)+"name",a=e.propsForm,i=e.properties.filter(function(e){return n.name==e.name});a[t].$setValidity("duplicated",i.length<=1)},t.validateType=function(n){var t=n.type.validation.maxValue,a=n.type.validation.minValue;if(t||a){var i=parseInt(n.value);if(i){var o=e.properties.indexOf(n)+"value",r=e.propsForm[o];r.$setValidity("max",!t||i<t),r.$setValidity("min",!a||i>a)}}}}])},function(e,n){angular.module("xodus").controller("SearchController",["EntityTypeService","$location","$routeParams","$scope","$uibModal","NavigationService","ConfirmationService",function(e,n,t,a,i,o,r){function l(){angular.forEach(a.types,function(e){e.id===t.typeId&&(a.selectedType=e)})}var d=this;return a.types=[],a.selectedType=null,a.searchQuery=t.q,t.typeId?(e.all().then(function(e){a.types=e,l()}),d.onTypeSelect=function(e){o.toType(e.id).search("q",null)},d.onSearch=function(){n.search("q",a.searchQuery)},d.newEntity=function(){o.toEntity(a.selectedType.id)},d.deleteSearchResult=function(){e.search(t.typeId,a.searchQuery).then(function(n){r({label:'You are going to delete "'+n.totalCount+'" entities',message:"Are you sure to proceed?",action:"Proceed"},function(){e.bulkDelete(t.typeId,a.searchQuery)["catch"]()})})},void(a.openInfo=function(){var e=i.open({animation:!0,templateUrl:"search-info.html",size:"lg",controller:["$scope",function(n){n.closeInfo=function(){e.dismiss()}}]})})):void o.toType()}])},function(e,n){angular.module("xodus").controller("DBDialogController",["$scope","$http","$uibModalInstance",function(e,n,t){e.error=null,e.onSuccess=function(){t.dismiss(!0)},e.changeDB=function(){e.$broadcast("applyDBChange")},e.cancel=function(){t.dismiss("cancel")},e.getMessage=function(n){var t=e.database[n];if("undefined"!=typeof t&&!t.$valid){var a="";return a+=t.$error.required?" - is required":" - is invalid"}}}])},function(e,n,t){angular.module("xodus").controller("DBController",["$scope","$http","$uibModal","$route","EntityTypeService","NavigationService","DatabaseService",function(e,n,a,i,o,r,l){var d=this,s="jetPassServerDb",c="teamsysstore";d.predefinedKeys=[{name:"Hub",key:s},{name:"YouTrack",key:c}],e.dbs=[],l.getSummary().then(function(n){e.dbs=n.recent,angular.forEach(e.dbs,function(e){e.title||(e.key===s?e.title="HUB: "+e.location:e.key===c?e.title="YouTrack: "+e.location:e.title=e.key+":"+e.location),e.isCurrent=n.location===e.location&&n.key===e.key})}),d.changeDB=function(e){l.update(e)},d.openDialog=function(){a.open({animation:!0,template:t(26),controller:"DBDialogController",controllerAs:"dbDialog"}).result.then(function(e){e&&r.toType()})},d.forceReload=r.forceReload,d.deleteDB=function(e,n){return n.stopPropagation(),e.markForDelete?void l.deleteDB(e):void(e.markForDelete=!0)},d.undoDeleteDB=function(e,n){e.markForDelete=!1,n.stopPropagation()}}])},function(e,n,t){angular.module("xodus").directive("entityTypeView",["templateUrl",function(e){return{restrict:"E",scope:{selectedType:"&"},replace:!0,template:t(27)}}])},function(e,n){angular.module("xodus").directive("entityLink",function(){return{restrict:"E",template:function(e,n){return'<a href="#/type/'+n.typeid+"/entity/"+n.entityid+'">'+n.title+"</a>"}}})},function(e,n,t){angular.module("xodus").directive("formView",["$uibModal","$location","templateUrl","NavigationService","ConfirmationService",function(e,n,a,i,o){return{restrict:"E",scope:{entityId:"=",entityTypeId:"="},replace:!0,template:t(30),link:function(e,t,a){function r(e,n){var t=l(e)[n];if("undefined"!=typeof t&&!t.$valid){var a="";return t.$error.number&&(a+=" - not a number"),t.$error.min&&(a+=" - too small"),t.$error.max&&(a+=" - too large"),t.$error.pattern&&(a+=" - not match pattern"),t.$error.duplicated&&(a+=" - duplicated"),t.$error.required&&!a&&(a+=" - required field"),"✘"+a}}function l(e){return t.find('form[name="'+e+'"]').scope()[e]}function d(n){return o({label:"You can loose unsaved data",message:"Are you sure to proceed?",action:"Proceed"},function(t){t&&(e.editMode=!1,n())})}function s(){i.toType(e.entityTypeId)}e.editMode=null===e.entityId,e.toggleView=function(){e.editMode=!e.editMode},e.cancel=function(){e.editMode?d(s):i.toType(e.entityTypeId)},e.getMessage=r,e.hasError=function(e,n){var t=l(e)[n];return t&&t.$invalid&&t.$dirty},e.makeDirty=function(e){angular.forEach(Object.keys(e),function(n){var t=e[n];t&&angular.isFunction(t.$setDirty)&&t.$setDirty(!0)})},e.getForm=l;var c=e.$on("$locationChangeStart",function(t,a,i){e.editMode&&(d(function(){var e=a.substring(n.absUrl().length-n.url().length);n.path(e)}),t.preventDefault())});e.$on("$destroy",c)}}}])},function(e,n,t){angular.module("xodus").directive("storeSetup",["$http","NavigationService","DatabaseService",function(e,n,a){return{restrict:"E",scope:{showButtons:"=",onSuccess:"&",location:"=",key:"="},replace:!0,template:t(32),link:function(e){e.db={location:angular.isDefined(e.location)?e.location:null,key:angular.isDefined(e.key)?e.key:null},e.db.location&&e.db.key||a.getSummary().then(function(n){e.db=n}),e.error=null,e.changeDB=function(){e.database.$valid&&a.update(e.db).then(function(t){e.db.location=t.location,e.db.key=t.key;var a=e.onSuccess();a&&a(),n.toType()},function(){e.error="Error while changing database. Changes not applied."})},e.closeError=function(){e.error=null},e.$on("applyDBChange",e.changeDB);var t="jetPassServerDb",i="teamsysstore";e.predefinedKeys=[{name:"Hub",key:t},{name:"YouTrack",key:i}],e.applyKey=function(n){e.db.key=n.key}}}}])},function(e,n,t){angular.module("xodus").factory("ConfirmationService",["$uibModal","templateUrl",function(e,n){return function(n,a){return e.open({animation:!0,template:t(1),controller:"ConfirmationController",resolve:{item:function(){return n}}}).result.then(function(e){return a&&e&&a(e),e})}}])},function(e,n){angular.module("xodus").service("DatabaseService",["$http","$q","$location","NavigationService",function(e,n,t,a){function i(){return l?n.when(l):e.get("api/db").then(function(e){return l=e.data,l.location&&l.key?angular.isArray(l.types)&&l.types.length?angular.isObject(l)?n.when(l):n.reject("something strange with server"):(t.path("/empty-store"),n.reject("empty store")):(t.path("/setup"),n.reject("setup database first"))})}function o(n){return e.post("/api/db",n).then(function(e,n,t){return a.forceReload(),e})}function r(n){return e["delete"]("/api/db",{data:n}).then(function(e){var t=l.recent,a=t.indexOf(n);return a>-1&&t.splice(a,1),e})}var l=null;this.getSummary=i,this.update=o,this.deleteDB=r}])},function(e,n){angular.module("xodus").service("EntityTypeService",["$http","$q","$location","DatabaseService",function(e,n,t,a){function i(){return a.getSummary().then(function(e){return e.types})}function o(e){return i().then(function(n){var t=null;return angular.forEach(n,function(n){n.id==e&&(t=n)}),t})}function r(n,t,a,i){return e.get("api/type/"+n+"/entities",{params:{q:t,offset:a,pageSize:i?i:50}}).then(function(e){return e.data})}function l(n,t){return e["delete"]("api/jobs/type/"+n+"/entities",{params:{q:t}}).then(function(e){return e.data})}this.all=i,this.byId=o,this.search=r,this.bulkDelete=l}])},function(e,n){angular.module("xodus").service("EntitiesService",["$http","$q","$location",function(e,n,t){function a(){return angular.copy(b)}function i(){return{name:null,value:null,type:angular.copy(b[0])}}function o(e){return angular.copy(e)}function r(e){return{type:b[0],typeId:e,properties:[],blobs:[],links:[]}}function l(e){var n=b.filter(function(n){return n.clazz===e.type.clazz});n[0]&&(e.type.validation=angular.copy(n[0].validation))}function d(e,n){var t={properties:{added:[],deleted:[],modified:[]},links:{added:[],deleted:[],modified:[]}};return p(t,e,n,g("properties"),function(e,n){e.type.clazz===n.type.clazz?e.value!==n.value&&t.properties.modified.push(n):(t.properties.deleted.push(e),t.properties.added.push(n))}),p(t,e,n,g("links"),function(e,n){e.entityId===n.entityId&&e.typeId===n.typeId||t.links.modified.push(n)}),t}function s(n,t){var a=!angular.isDefined(n.id),i="api/type/"+n.typeId+"/entity";return a||(i=i+"/"+n.id),a?e.post(i,t):e.put(i,t)}function c(e,n){var t=e.filter(function(e){return e.name===n});return t.length?t[0]:null}function u(e,n){var t=e.concat(n),a={};return angular.forEach(t,function(e){a[e.name]||(a[e.name]=null)}),{joined:t,uniqueNames:Object.keys(a)}}function p(e,n,t,a,i){var o=a(n),r=a(t),l=a(e),d=u(o,r);angular.forEach(d.uniqueNames,function(e){var n=c(o,e),t=c(r,e);n&&t?i(n,t):n?l.deleted.push(n):t&&l.added.push(t)})}function g(e){return function(n){return n[e]}}function m(a,i){return i?e.get("api/type/"+a+"/entity/"+i).then(function(e){return e.data},function(){t.path("/error")}):n.when(r(a))}function f(e){return angular.extend({},{displayName:null,clazz:null,readonly:!1},e)}function h(n,t){return e["delete"]("api/type/"+n+"/entity/"+t)}var v="^[-+]{0,1}[0-9]*$",y="^[-+]?[0-9]+[.]{0,1}([0-9]+)?([eE][-+]?[0-9]+)?$",b=[f({displayName:"String",clazz:"java.lang.String",validation:{pattern:null}}),f({displayName:"Boolean",clazz:"java.lang.Boolean",validation:{pattern:null}}),f({displayName:"Byte",clazz:"java.lang.Byte",validation:{pattern:v,minValue:-128,maxValue:127}}),f({displayName:"Short",clazz:"java.lang.Short",validation:{pattern:v,minValue:-32768,maxValue:32767}}),f({displayName:"Integer",clazz:"java.lang.Integer",validation:{pattern:v,minValue:-2147483648,maxValue:2147483647}}),f({displayName:"Long",clazz:"java.lang.Long",validation:{pattern:v}}),f({displayName:"Double",clazz:"java.lang.Double",validation:{pattern:y}}),f({displayName:"Float",clazz:"java.lang.Float",validation:{pattern:y}})];this.allTypes=a,this.newProperty=i,this.fromProperty=o,this.appendValidation=l,this.newEntity=r,this.getChangeSummary=d,this.save=s,this.byId=m,this.deleteEntity=h}])},function(e,n){angular.module("xodus").service("NavigationService",["$location","$window",function(e,n){function t(n){return angular.isDefined(n)?e.path("/type/"+n):t(0)}function a(n,t){e.path("/type/"+n+(angular.isDefined(t)?"/entity/"+t:"/new"))}function i(){t(),n.location.reload()}this.toType=t,this.toEntity=a,this.forceReload=i,this.api={blobLink:function(e,n){return"api/type/"+e.typeId+"/entity/"+e.id+"/blob/"+n}}}])}]);